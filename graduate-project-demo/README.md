# 毕业总结

为期3个月的进阶训练营结束啦，通过这次的学习让我收获颇深，也发现了自己在很多技术领域的欠缺，通过上毛老师和大明老师的课对微服务、分布式、golang等技术也有了新的认识，并将一些技术也应用到了实际工作中。比如，error处理机制、errgroup应用、OpenTelemetry、以及微服务工程化实践等。

此次学习对我感触最深的就是学习到了很多主流微服务架构设计、工程化实践以及一些中间件的一些设计思想和使用技巧，了解了领域驱动设计的一些概念，以及kratos的一些设计的思想，有很多课程还需要自己下来再反复回看，结合毛老师分享的reference仔细研究理解其中的设计奥秘，并将其应用到实际工作中。

最后还是特别感谢各位老师们的分享和日常耐心答疑，感谢。


# Geekband Graduate Project

## 题目

对当下自己项目中的业务，进行一个微服务改造，需要考虑如下技术点：

- 微服务架构（BFF、Service、Admin、Job、Task 分模块）

- API 设计（包括 API 定义、错误码规范、Error 的使用）

- gRPC 的使用

- Go 项目工程化（项目结构、DI、代码分层、ORM 框架）

- 并发的使用（errgroup 的并行链路请求）

- 微服务中间件的使用（ELK、Opentracing、Prometheus、Kafka）

- 缓存的使用优化（一致性处理、Pipeline 优化）



## 项目

实现一个简单的IOT OTA系统，包含以下内容

* OTA 管理
  * 固件管理
  * 版本管理
  * 任务管理

* 利于IOT通道实现OTA升级
  * 固件下发
  * 任务下发
  * 升级状态同步

    
## 框架使用

微服务框架

* kratos version v2.4.0

中间件

| 数据库            | SDK                            |
|----------------|--------------------------------|
| mariadb v6.7.4 | github.com/jmoiron/sqlx v1.3.4 |
| minio 2020-10-12T21-53-21Z   | github.com/minio/minio-go/v7 v7.0.34 |
| emqx v4.3.8    | http client                    |

## 项目结构

### 服务分层

| 名称            | 描述                                                 | 代码位置                                                    |
|---------------|----------------------------------------------------| ----------------------------------------------------------- |
| ota-interface | BFF服务，封装OTA业务逻辑，如任务管理等，提供http与grpc协议的接口            | |
| ota-manager   | OTA管理服务，提供基础的OTA能力，如固件包、版本、下发等，提供http与grpc协议的接口    | |
| ota-engine    | 设备端OTA引擎服务，负责接受OTA任务并实施OTA升级动作，将升级进度和最终状态实时回传IOT云端 | |



## TODO

- 服务结构划分
- 由于最近工作有紧急项目事情，代码暂未实现
